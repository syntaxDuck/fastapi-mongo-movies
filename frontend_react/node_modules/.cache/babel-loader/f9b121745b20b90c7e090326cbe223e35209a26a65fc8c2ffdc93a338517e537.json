{"ast":null,"code":"import _objectSpread from\"/Users/kameroncomer/dev/fastapi-mongo-movies/frontend_react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8000';export const movieService={async fetchMovies(params){const queryParams=new URLSearchParams();if(params){Object.entries(params).forEach(_ref=>{let[key,value]=_ref;if(value!==undefined&&value!==null){queryParams.append(key,value.toString());}});}const response=await fetch(\"\".concat(API_BASE_URL,\"/movies?\").concat(queryParams));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();return processMovies(data);},async getMovieById(movieId){const response=await fetch(\"\".concat(API_BASE_URL,\"/movies/\").concat(movieId));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();return processMovies([data])[0];}};export const commentService={async fetchComments(params){const queryParams=new URLSearchParams();if(params){Object.entries(params).forEach(_ref2=>{let[key,value]=_ref2;if(value!==undefined&&value!==null){queryParams.append(key,value.toString());}});}const response=await fetch(\"\".concat(API_BASE_URL,\"/comments?\").concat(queryParams));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}return await response.json();}};function processMovies(movies){const defaultImg=\"https://thumbs.dreamstime.com/b/film-real-25021714.jpg\";return movies.map(movie=>{if(movie.poster){// Keep the poster as is for now, React will handle broken images\nreturn movie;}else{return _objectSpread(_objectSpread({},movie),{},{poster:defaultImg});}});}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","movieService","fetchMovies","params","queryParams","URLSearchParams","Object","entries","forEach","_ref","key","value","undefined","append","toString","response","fetch","concat","ok","Error","status","data","json","processMovies","getMovieById","movieId","commentService","fetchComments","_ref2","movies","defaultImg","map","movie","poster","_objectSpread"],"sources":["/Users/kameroncomer/dev/fastapi-mongo-movies/frontend_react/src/services/api.ts"],"sourcesContent":["import { Movie, Comment } from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nexport const movieService = {\n  async fetchMovies(params?: {\n    type?: string;\n    skip?: number;\n    limit?: number;\n    genre?: string;\n    director?: string;\n    minYear?: number;\n    maxYear?: number;\n    minRating?: number;\n  }): Promise<Movie[]> {\n    const queryParams = new URLSearchParams();\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n\n    const response = await fetch(`${API_BASE_URL}/movies?${queryParams}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return processMovies(data);\n  },\n\n  async getMovieById(movieId: string): Promise<Movie> {\n    const response = await fetch(`${API_BASE_URL}/movies/${movieId}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return processMovies([data])[0];\n  }\n};\n\nexport const commentService = {\n  async fetchComments(params?: { movie_id?: string }): Promise<Comment[]> {\n    const queryParams = new URLSearchParams();\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n\n    const response = await fetch(`${API_BASE_URL}/comments?${queryParams}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    return await response.json();\n  }\n};\n\nfunction processMovies(movies: Movie[]): Movie[] {\n  const defaultImg = \"https://thumbs.dreamstime.com/b/film-real-25021714.jpg\";\n  \n  return movies.map(movie => {\n    if (movie.poster) {\n      // Keep the poster as is for now, React will handle broken images\n      return movie;\n    } else {\n      return {\n        ...movie,\n        poster: defaultImg\n      };\n    }\n  });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}