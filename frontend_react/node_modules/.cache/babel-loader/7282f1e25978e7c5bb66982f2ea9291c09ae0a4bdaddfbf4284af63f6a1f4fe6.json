{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\nexport const movieService = {\n  async fetchMovies(params) {\n    const queryParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n    const response = await fetch(`${API_BASE_URL}/movies/?${queryParams.toString()}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return processMovies(data);\n  },\n  async getMovieById(movieId) {\n    const response = await fetch(`${API_BASE_URL}/movies/${movieId}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return processMovies([data])[0];\n  }\n};\nexport const commentService = {\n  async fetchComments(params) {\n    const queryParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n    const response = await fetch(`${API_BASE_URL}/comments?${queryParams}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  }\n};\nfunction processMovies(movies) {\n  const defaultImg = \"https://thumbs.dreamstime.com/b/film-real-25021714.jpg\";\n  return movies.map(movie => {\n    if (movie.poster) {\n      // Keep the poster as is for now, React will handle broken images\n      return movie;\n    } else {\n      return {\n        ...movie,\n        poster: defaultImg\n      };\n    }\n  });\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","movieService","fetchMovies","params","queryParams","URLSearchParams","Object","entries","forEach","key","value","undefined","append","toString","response","fetch","ok","Error","status","data","json","processMovies","getMovieById","movieId","commentService","fetchComments","movies","defaultImg","map","movie","poster"],"sources":["/Users/kameroncomer/dev/fastapi-mongo-movies/frontend_react/src/services/api.ts"],"sourcesContent":["import { Movie, Comment } from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nexport const movieService = {\n  async fetchMovies(params?: {\n    type?: string;\n    skip?: number;\n    limit?: number;\n    genre?: string;\n    director?: string;\n    minYear?: number;\n    maxYear?: number;\n    minRating?: number;\n  }): Promise<Movie[]> {\n    const queryParams = new URLSearchParams();\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n\n    const response = await fetch(`${API_BASE_URL}/movies/?${queryParams.toString()}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return processMovies(data);\n  },\n\n  async getMovieById(movieId: string): Promise<Movie> {\n    const response = await fetch(`${API_BASE_URL}/movies/${movieId}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return processMovies([data])[0];\n  }\n};\n\nexport const commentService = {\n  async fetchComments(params?: { movie_id?: string }): Promise<Comment[]> {\n    const queryParams = new URLSearchParams();\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n\n    const response = await fetch(`${API_BASE_URL}/comments?${queryParams}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    return await response.json();\n  }\n};\n\nfunction processMovies(movies: Movie[]): Movie[] {\n  const defaultImg = \"https://thumbs.dreamstime.com/b/film-real-25021714.jpg\";\n  \n  return movies.map(movie => {\n    if (movie.poster) {\n      // Keep the poster as is for now, React will handle broken images\n      return movie;\n    } else {\n      return {\n        ...movie,\n        poster: defaultImg\n      };\n    }\n  });\n}"],"mappings":"AAEA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAE7E,OAAO,MAAMC,YAAY,GAAG;EAC1B,MAAMC,WAAWA,CAACC,MASjB,EAAoB;IACnB,MAAMC,WAAW,GAAG,IAAIC,eAAe,CAAC,CAAC;IAEzC,IAAIF,MAAM,EAAE;MACVG,MAAM,CAACC,OAAO,CAACJ,MAAM,CAAC,CAACK,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;QAC/C,IAAIA,KAAK,KAAKC,SAAS,IAAID,KAAK,KAAK,IAAI,EAAE;UACzCN,WAAW,CAACQ,MAAM,CAACH,GAAG,EAAEC,KAAK,CAACG,QAAQ,CAAC,CAAC,CAAC;QAC3C;MACF,CAAC,CAAC;IACJ;IAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGlB,YAAY,YAAYO,WAAW,CAACS,QAAQ,CAAC,CAAC,EAAE,CAAC;IACjF,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuBH,QAAQ,CAACI,MAAM,EAAE,CAAC;IAC3D;IAEA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;IAClC,OAAOC,aAAa,CAACF,IAAI,CAAC;EAC5B,CAAC;EAED,MAAMG,YAAYA,CAACC,OAAe,EAAkB;IAClD,MAAMT,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGlB,YAAY,WAAW0B,OAAO,EAAE,CAAC;IACjE,IAAI,CAACT,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuBH,QAAQ,CAACI,MAAM,EAAE,CAAC;IAC3D;IAEA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;IAClC,OAAOC,aAAa,CAAC,CAACF,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;EACjC;AACF,CAAC;AAED,OAAO,MAAMK,cAAc,GAAG;EAC5B,MAAMC,aAAaA,CAACtB,MAA8B,EAAsB;IACtE,MAAMC,WAAW,GAAG,IAAIC,eAAe,CAAC,CAAC;IAEzC,IAAIF,MAAM,EAAE;MACVG,MAAM,CAACC,OAAO,CAACJ,MAAM,CAAC,CAACK,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;QAC/C,IAAIA,KAAK,KAAKC,SAAS,IAAID,KAAK,KAAK,IAAI,EAAE;UACzCN,WAAW,CAACQ,MAAM,CAACH,GAAG,EAAEC,KAAK,CAACG,QAAQ,CAAC,CAAC,CAAC;QAC3C;MACF,CAAC,CAAC;IACJ;IAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGlB,YAAY,aAAaO,WAAW,EAAE,CAAC;IACvE,IAAI,CAACU,QAAQ,CAACE,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuBH,QAAQ,CAACI,MAAM,EAAE,CAAC;IAC3D;IAEA,OAAO,MAAMJ,QAAQ,CAACM,IAAI,CAAC,CAAC;EAC9B;AACF,CAAC;AAED,SAASC,aAAaA,CAACK,MAAe,EAAW;EAC/C,MAAMC,UAAU,GAAG,wDAAwD;EAE3E,OAAOD,MAAM,CAACE,GAAG,CAACC,KAAK,IAAI;IACzB,IAAIA,KAAK,CAACC,MAAM,EAAE;MAChB;MACA,OAAOD,KAAK;IACd,CAAC,MAAM;MACL,OAAO;QACL,GAAGA,KAAK;QACRC,MAAM,EAAEH;MACV,CAAC;IACH;EACF,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}