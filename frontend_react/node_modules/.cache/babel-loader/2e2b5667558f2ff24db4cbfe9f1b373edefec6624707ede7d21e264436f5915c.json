{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\nexport const movieService = {\n  async fetchMovies(params) {\n    const queryParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n    const response = await fetch(`${API_BASE_URL}/movies/?${queryParams.toString()}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('API Error:', response.status, errorText);\n      throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n    }\n    const data = await response.json();\n    return processMovies(data);\n  },\n  async getMovieById(movieId) {\n    const response = await fetch(`${API_BASE_URL}/movies/${movieId}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return processMovies([data])[0];\n  }\n};\nexport const commentService = {\n  async fetchComments(params) {\n    const queryParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n    const response = await fetch(`${API_BASE_URL}/comments/?${queryParams.toString()}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  }\n};\nfunction processMovies(movies) {\n  const defaultImg = \"https://thumbs.dreamstime.com/b/film-real-25021714.jpg\";\n  return movies.map(movie => {\n    if (movie.poster) {\n      // Keep the poster as is for now, React will handle broken images\n      return movie;\n    } else {\n      return {\n        ...movie,\n        poster: defaultImg\n      };\n    }\n  });\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","movieService","fetchMovies","params","queryParams","URLSearchParams","Object","entries","forEach","key","value","undefined","append","toString","response","fetch","method","headers","ok","errorText","text","console","error","status","Error","data","json","processMovies","getMovieById","movieId","commentService","fetchComments","movies","defaultImg","map","movie","poster"],"sources":["/Users/kameroncomer/dev/fastapi-mongo-movies/frontend_react/src/services/api.ts"],"sourcesContent":["import { Movie, Comment } from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nexport const movieService = {\n  async fetchMovies(params?: {\n    type?: string;\n    skip?: number;\n    limit?: number;\n    genre?: string;\n    director?: string;\n    minYear?: number;\n    maxYear?: number;\n    minRating?: number;\n  }): Promise<Movie[]> {\n    const queryParams = new URLSearchParams();\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n\n    const response = await fetch(`${API_BASE_URL}/movies/?${queryParams.toString()}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      },\n    });\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('API Error:', response.status, errorText);\n      throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n    }\n    \n    const data = await response.json();\n    return processMovies(data);\n  },\n\n  async getMovieById(movieId: string): Promise<Movie> {\n    const response = await fetch(`${API_BASE_URL}/movies/${movieId}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return processMovies([data])[0];\n  }\n};\n\nexport const commentService = {\n  async fetchComments(params?: { movie_id?: string }): Promise<Comment[]> {\n    const queryParams = new URLSearchParams();\n    \n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          queryParams.append(key, value.toString());\n        }\n      });\n    }\n\n    const response = await fetch(`${API_BASE_URL}/comments/?${queryParams.toString()}`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    return await response.json();\n  }\n};\n\nfunction processMovies(movies: Movie[]): Movie[] {\n  const defaultImg = \"https://thumbs.dreamstime.com/b/film-real-25021714.jpg\";\n  \n  return movies.map(movie => {\n    if (movie.poster) {\n      // Keep the poster as is for now, React will handle broken images\n      return movie;\n    } else {\n      return {\n        ...movie,\n        poster: defaultImg\n      };\n    }\n  });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}