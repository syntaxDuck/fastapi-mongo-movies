{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{movieService}from'../services/api';import{ImdbRating,TomatoesCriticRating,TomatoesViewerRating}from'./Rating';import'./MovieDetails.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const MovieDetail=_ref=>{let{name,key:itemKey,item}=_ref;if(!item||item[itemKey]===undefined||item[itemKey]===null){return/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[name,\":\"]}),\" N/A\"]});}const value=item[itemKey];const displayValue=Array.isArray(value)?value.join(', '):value;return/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[name,\":\"]}),\" \",displayValue]});};const MovieDetailsHeader=_ref2=>{let{movie}=_ref2;const data=\"\".concat(movie.year,\"\\u30FB\").concat(Math.floor(movie.runtime/60),\"h \").concat(movie.runtime%60,\"m\");return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:movie.title}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-details-meta\",children:/*#__PURE__*/_jsx(\"p\",{children:data})})]});};const MovieDetailsBody=_ref3=>{let{movie}=_ref3;const tomatoesCritic=TomatoesCriticRating(movie.tomatoes);const tomatoesViewer=TomatoesViewerRating(movie.tomatoes);const imdb=ImdbRating({movie});const handleImageError=e=>{e.currentTarget.src='https://thumbs.dreamstime.com/b/film-real-25021714.jpg';};return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details-body\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.poster,alt:movie.title,onError:handleImageError,className:\"movie-details-poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details-info\",children:[/*#__PURE__*/_jsx(MovieDetail,{name:\"Genres\",item:movie},\"genres\"),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(MovieDetail,{name:\"Directors\",item:movie},\"directors\"),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(MovieDetail,{name:\"Writers\",item:movie},\"writers\"),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(MovieDetail,{name:\"Cast\",item:movie},\"cast\"),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(MovieDetail,{name:\"Countries\",item:movie},\"countries\"),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details-ratings\",children:[imdb,tomatoesCritic,tomatoesViewer]})]})]});};const MoviePlot=_ref4=>{let{movie}=_ref4;const plotText=movie.fullplot&&movie.fullplot.trim().length>0?movie.fullplot:movie.plot;return/*#__PURE__*/_jsx(\"div\",{className:\"movie-details-plot\",children:/*#__PURE__*/_jsx(\"p\",{children:plotText})});};const MovieDetails=()=>{const{movieId}=useParams();const[movie,setMovie]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const loadMovie=async()=>{if(!movieId)return;try{setLoading(true);const movieData=await movieService.getMovieById(movieId);setMovie(movieData);setError(null);}catch(err){setError('Failed to load movie details');console.error('Error loading movie:',err);}finally{setLoading(false);}};loadMovie();},[movieId]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading movie details...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}if(!movie){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"Movie not found\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details\",children:[/*#__PURE__*/_jsx(MovieDetailsHeader,{movie:movie}),/*#__PURE__*/_jsx(MovieDetailsBody,{movie:movie}),/*#__PURE__*/_jsx(MoviePlot,{movie:movie})]});};export default MovieDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","movieService","ImdbRating","TomatoesCriticRating","TomatoesViewerRating","jsxs","_jsxs","jsx","_jsx","MovieDetail","_ref","name","key","itemKey","item","undefined","children","value","displayValue","Array","isArray","join","MovieDetailsHeader","_ref2","movie","data","concat","year","Math","floor","runtime","className","title","MovieDetailsBody","_ref3","tomatoesCritic","tomatoes","tomatoesViewer","imdb","handleImageError","e","currentTarget","src","poster","alt","onError","MoviePlot","_ref4","plotText","fullplot","trim","length","plot","MovieDetails","movieId","setMovie","loading","setLoading","error","setError","loadMovie","movieData","getMovieById","err","console"],"sources":["/Users/kameroncomer/dev/fastapi-mongo-movies/frontend_react/src/components/MovieDetails.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Movie } from '../types';\nimport { movieService } from '../services/api';\nimport { ImdbRating, TomatoesCriticRating, TomatoesViewerRating } from './Rating';\nimport './MovieDetails.css';\n\nconst MovieDetail: React.FC<{ name: string; key: string; item: any }> = ({ name, key: itemKey, item }) => {\n  if (!item || item[itemKey] === undefined || item[itemKey] === null) {\n    return <p><strong>{name}:</strong> N/A</p>;\n  }\n\n  const value = item[itemKey];\n  const displayValue = Array.isArray(value) ? value.join(', ') : value;\n\n  return <p><strong>{name}:</strong> {displayValue}</p>;\n};\n\nconst MovieDetailsHeader: React.FC<{ movie: Movie }> = ({ movie }) => {\n  const data = `${movie.year}ãƒ»${Math.floor(movie.runtime / 60)}h ${movie.runtime % 60}m`;\n  \n  return (\n    <div className=\"movie-details-header\">\n      <h1>{movie.title}</h1>\n      <div className=\"movie-details-meta\">\n        <p>{data}</p>\n      </div>\n    </div>\n  );\n};\n\nconst MovieDetailsBody: React.FC<{ movie: Movie }> = ({ movie }) => {\n  const tomatoesCritic = TomatoesCriticRating(movie.tomatoes);\n  const tomatoesViewer = TomatoesViewerRating(movie.tomatoes);\n  const imdb = ImdbRating({ movie });\n\n  const handleImageError = (e: React.SyntheticEvent<HTMLImageElement>) => {\n    e.currentTarget.src = 'https://thumbs.dreamstime.com/b/film-real-25021714.jpg';\n  };\n\n  return (\n    <div className=\"movie-details-body\">\n      <img\n        src={movie.poster}\n        alt={movie.title}\n        onError={handleImageError}\n        className=\"movie-details-poster\"\n      />\n      <div className=\"movie-details-info\">\n        <MovieDetail name=\"Genres\" key=\"genres\" item={movie} />\n        <hr />\n        <MovieDetail name=\"Directors\" key=\"directors\" item={movie} />\n        <hr />\n        <MovieDetail name=\"Writers\" key=\"writers\" item={movie} />\n        <hr />\n        <MovieDetail name=\"Cast\" key=\"cast\" item={movie} />\n        <hr />\n        <MovieDetail name=\"Countries\" key=\"countries\" item={movie} />\n        <hr />\n        <div className=\"movie-details-ratings\">\n          {imdb}\n          {tomatoesCritic}\n          {tomatoesViewer}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst MoviePlot: React.FC<{ movie: Movie }> = ({ movie }) => {\n  const plotText = movie.fullplot && movie.fullplot.trim().length > 0 ? movie.fullplot : movie.plot;\n  \n  return (\n    <div className=\"movie-details-plot\">\n      <p>{plotText}</p>\n    </div>\n  );\n};\n\nconst MovieDetails: React.FC = () => {\n  const { movieId } = useParams<{ movieId: string }>();\n  const [movie, setMovie] = useState<Movie | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadMovie = async () => {\n      if (!movieId) return;\n      \n      try {\n        setLoading(true);\n        const movieData = await movieService.getMovieById(movieId);\n        setMovie(movieData);\n        setError(null);\n      } catch (err) {\n        setError('Failed to load movie details');\n        console.error('Error loading movie:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadMovie();\n  }, [movieId]);\n\n  if (loading) {\n    return <div className=\"loading\">Loading movie details...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  if (!movie) {\n    return <div className=\"error\">Movie not found</div>;\n  }\n\n  return (\n    <div className=\"movie-details\">\n      <MovieDetailsHeader movie={movie} />\n      <MovieDetailsBody movie={movie} />\n      <MoviePlot movie={movie} />\n    </div>\n  );\n};\n\nexport default MovieDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}