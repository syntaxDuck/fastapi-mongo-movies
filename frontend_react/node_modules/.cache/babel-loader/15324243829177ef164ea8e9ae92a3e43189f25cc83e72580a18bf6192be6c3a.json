{"ast":null,"code":"import _objectSpread from\"/Users/kameroncomer/dev/fastapi-mongo-movies/frontend_react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{movieService}from'../services/api';import'./MovieList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MovieList=_ref=>{let{filter}=_ref;const[movies,setMovies]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[page,setPage]=useState(0);const[hasMore,setHasMore]=useState(true);const pageSize=20;const loadMovies=async function(pageNum){let reset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{setLoading(true);const params=_objectSpread({type:'movie',skip:pageNum*pageSize,limit:pageSize},filter);const newMovies=await movieService.fetchMovies(params);if(reset){setMovies(newMovies);}else{setMovies(prev=>[...prev,...newMovies]);}setHasMore(newMovies.length===pageSize);setError(null);}catch(err){setError('Failed to load movies');console.error('Error loading movies:',err);}finally{setLoading(false);}};useEffect(()=>{setPage(0);loadMovies(0,true);},[filter]);const loadMore=()=>{const nextPage=page+1;setPage(nextPage);loadMovies(nextPage,false);};const handleImageError=e=>{e.currentTarget.src='https://thumbs.dreamstime.com/b/film-real-25021714.jpg';};if(loading&&movies.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading movies...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-list-container\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"movie-list\",children:movies.map((movie,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"movie\",children:/*#__PURE__*/_jsxs(Link,{to:\"/movie/\".concat(movie._id),children:[/*#__PURE__*/_jsx(\"img\",{src:movie.poster,alt:movie.title,onError:handleImageError,className:\"movie-poster\"}),/*#__PURE__*/_jsx(\"span\",{className:\"movie-hover-text\",children:movie.title})]})},\"\".concat(movie._id,\"-\").concat(index)))}),hasMore&&/*#__PURE__*/_jsx(\"div\",{className:\"load-more-container\",children:/*#__PURE__*/_jsx(\"button\",{onClick:loadMore,disabled:loading,className:\"load-more-btn\",children:loading?'Loading...':'Next ▷'})}),!hasMore&&movies.length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"no-more\",children:\"No more movies to load\"})]});};export default MovieList;","map":{"version":3,"names":["React","useState","useEffect","Link","movieService","jsx","_jsx","jsxs","_jsxs","MovieList","_ref","filter","movies","setMovies","loading","setLoading","error","setError","page","setPage","hasMore","setHasMore","pageSize","loadMovies","pageNum","reset","arguments","length","undefined","params","_objectSpread","type","skip","limit","newMovies","fetchMovies","prev","err","console","loadMore","nextPage","handleImageError","e","currentTarget","src","className","children","map","movie","index","to","concat","_id","poster","alt","title","onError","onClick","disabled"],"sources":["/Users/kameroncomer/dev/fastapi-mongo-movies/frontend_react/src/components/MovieList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Movie } from '../types';\nimport { movieService } from '../services/api';\nimport './MovieList.css';\n\ninterface MovieListProps {\n  filter?: {\n    genre?: string;\n    director?: string;\n    minYear?: number;\n    maxYear?: number;\n    minRating?: number;\n  };\n}\n\nconst MovieList: React.FC<MovieListProps> = ({ filter }) => {\n  const [movies, setMovies] = useState<Movie[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const pageSize = 20;\n\n  const loadMovies = async (pageNum: number, reset = false) => {\n    try {\n      setLoading(true);\n      const params = {\n        type: 'movie',\n        skip: pageNum * pageSize,\n        limit: pageSize,\n        ...filter\n      };\n      \n      const newMovies = await movieService.fetchMovies(params);\n      \n      if (reset) {\n        setMovies(newMovies);\n      } else {\n        setMovies(prev => [...prev, ...newMovies]);\n      }\n      \n      setHasMore(newMovies.length === pageSize);\n      setError(null);\n    } catch (err) {\n      setError('Failed to load movies');\n      console.error('Error loading movies:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    setPage(0);\n    loadMovies(0, true);\n  }, [filter]);\n\n  const loadMore = () => {\n    const nextPage = page + 1;\n    setPage(nextPage);\n    loadMovies(nextPage, false);\n  };\n\n  const handleImageError = (e: React.SyntheticEvent<HTMLImageElement>) => {\n    e.currentTarget.src = 'https://thumbs.dreamstime.com/b/film-real-25021714.jpg';\n  };\n\n  if (loading && movies.length === 0) {\n    return <div className=\"loading\">Loading movies...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  return (\n    <div className=\"movie-list-container\">\n      <ul className=\"movie-list\">\n        {movies.map((movie, index) => (\n          <li key={`${movie._id}-${index}`} className=\"movie\">\n            <Link to={`/movie/${movie._id}`}>\n              <img\n                src={movie.poster}\n                alt={movie.title}\n                onError={handleImageError}\n                className=\"movie-poster\"\n              />\n              <span className=\"movie-hover-text\">{movie.title}</span>\n            </Link>\n          </li>\n        ))}\n      </ul>\n      \n      {hasMore && (\n        <div className=\"load-more-container\">\n          <button \n            onClick={loadMore} \n            disabled={loading}\n            className=\"load-more-btn\"\n          >\n            {loading ? 'Loading...' : 'Next ▷'}\n          </button>\n        </div>\n      )}\n      \n      {!hasMore && movies.length > 0 && (\n        <p className=\"no-more\">No more movies to load</p>\n      )}\n    </div>\n  );\n};\n\nexport default MovieList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}